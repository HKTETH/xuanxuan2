(function(){var ff=Object.defineProperty;var sf=(je,ve,Ce)=>ve in je?ff(je,ve,{enumerable:!0,configurable:!0,writable:!0,value:Ce}):je[ve]=Ce;var _e=(je,ve,Ce)=>(sf(je,typeof ve!="symbol"?ve+"":ve,Ce),Ce);(function(){"use strict";const je=e=>{const t=window.document.createElement("script"),r=window.document.getElementsByTagName("head")[0];return t.src=e,r.appendChild(t)},ve=(e,t,r)=>{const n=window.document.createElement("iframe");return n.setAttribute("allowtransparency","true"),n.setAttribute("frameBorder","0"),n.setAttribute("src",r),n.setAttribute("scrolling","no"),e&&(n.style.height=typeof e!="string"?`${e}px`:e),t&&(n.style.width=typeof t!="string"?`${t}px`:t),n.style.display="none",n},Ce=(e,t,r)=>t.data.match(new RegExp(`(?:${r}:)dressipi.(?:hub|widget).${e}`)),Ni=(e,t,r,n)=>{if(n===r){const u=e.data.match(new RegExp(`(?:${t}:)dressipi.(?:hub|widget).resize;(\\d+)$`));if(u)return u[1]}return null},Fi=(e,t,r,n)=>{if(n===r){const u=e.data.match(new RegExp(`(?:${t}:)dressipi.(?:hub|widget).scrollTo;(\\d+)$`));if(u)return u[1]}return null},_t=(e,t,r,n)=>{const u=s=>{const c=s.origin.replace(/(^\w+:|^)\/\//,"");if(Ce(e,s,r)&&c===t){if(!s.data&&typeof s.data=="string")return null;n(s)}return null};return typeof window.addEventListener<"u"?window.addEventListener("message",u):window.attachEvent("onmessage",u)},Gi=(e,t,r,n)=>{_t("close",t,r,()=>{var u;e.parentNode&&e.parentNode.removeChild(e),(u=n.onClose)==null||u.call(n)}),_t("ready",t,r,()=>{var u;e.style.display="block",(u=n.onLoad)==null||u.call(n)}),_t("resize",t,r,u=>{var d;const s=u.origin.replace(/(^\w+:|^)\/\//,""),c=Ni(u,r,t,s);return c&&(e.style.height=`${parseInt(c,10)}px`,(d=n.onResize)==null||d.call(n)),null}),_t("scrollTo",t,r,u=>{var d;const s=u.origin.replace(/(^\w+:|^)\/\//,""),c=Fi(u,r,t,s);if(c){const{offsetTop:v}=e;return window.scrollTo(0,v+parseInt(c,10)),null}return(d=n.onScroll)==null||d.call(n),null})},Vi=e=>Object.keys(e).filter(t=>typeof e[t]<"u"&&e[t]!==void 0).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&"),Wr=(e,t,r)=>{if(!r.host)throw new Error("Please pass a server host to connect to in the configuration.");const n=Vi(t);return`${r.protocol}//${r.host}${e}${n?`?${n}`:""}`};function Kt(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Re(e,...t){if(!t.length)return e;const r=t.shift();if(Kt(e)&&Kt(r))for(const n in r)Kt(r[n])?(e[n]||Object.assign(e,{[n]:{}}),Re(e[n],r[n])):Object.assign(e,{[n]:r[n]});return Re(e,...t)}const Dr=class{constructor(t){_e(this,"config");_e(this,"set",(t,r,n)=>{if(r==="host"&&n)try{const u=new URL(n);this.config.protocol=u.protocol||this.config.protocol,this.config.host=u.host}catch{this.config.host=n}else this.config[r]=n;r==="namespace_id"&&(this.config.tracker=t.track.init(this.get()))});this.config=Re({},Dr.DEFAULT_CONFIG,t||{})}get(){return this.config}};let wt=Dr;_e(wt,"DEFAULT_CONFIG",{protocol:window.location.protocol==="file:"?"http:":window.location.protocol,tracking:{plp:{itemsOptional:!1}}});class Wi{constructor(t,r,n,u,s){_e(this,"track");_e(this,"identifiers");_e(this,"widget");_e(this,"configuration");_e(this,"hub");this.track=t,this.widget=r,this.identifiers=n,this.configuration=s,this.hub=u}exportedFunctions(){const t={track:this.track,identifiers:this.identifiers,widget:this.widget,config:this.configuration};return this.hub&&(t.hub=this.hub),t}config(t={}){return Re({},this.configuration.get(),t)}}const zi={get:(e,t)=>{const r=e==null?void 0:e.config().tracker;if(!r)throw new Error("You must provide a namespace_id before requesting identifiers");t({drsp_id:r.getDomainUserId(),pageview_id:r.getPageViewId()})}},Ki=()=>window.DressipiLoaderObjectName,Ji=e=>{const t=Ki();if(!t||window[t].initialized)return;const r=e.exportedFunctions(),n=(s,c,...d)=>{if(!r[s])throw console.error(r),new Error(`Could not load module '${s}'. Valid modules are ${Object.keys(r).join(",")}.`);if(Object.keys(r[s]||{}).indexOf(String(c))===-1)throw new Error(`Could not find function '${String(c)}' within the "${s}" module. Valid functions within are ${Object.keys(r).join(",")}.`);r[s][c](e,...d)},u=window[t].q;for(let s=0;s<u.length;s+=1){const[c,d,...v]=u[s];n(c,d,...v)}return window[t]=n,window[t].initialized=!0,window[t]},Jt="Dressipi",Xi=e=>{window[Jt]=window[Jt]||{},window[Jt].events={push:t=>{if(t.event==="pageTracked")e.configuration.set(e,"pageEventId",t.id),e.configuration.set(e,"location",window.location.href);else throw new Error("A call was made to push to the legacy events API which is not supported in the new SDK. Please use `Dressipi('[FunctionName]', params)` instead.")}}};var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var u=[null];u.push.apply(u,arguments);var s=Function.bind.apply(t,u);return new s}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var u=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,u.get?u:{enumerable:!0,get:function(){return e[n]}})}),r}var zr={},Zt={},Zi={get exports(){return Zt},set exports(e){Zt=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */(function(e){var t,r,n,u,s,c,d,v,_,p,O,A,D,I,P,H,F,R,W,S,M,z,G;(function(w){var V=typeof ne=="object"?ne:typeof self=="object"?self:typeof this=="object"?this:{};w(i(V,i(e.exports)));function i(o,a){return o!==V&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(l,h){return o[l]=a?a(l,h):h}}})(function(w){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])};t=function(i,o){V(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)},r=Object.assign||function(i){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h])}return i},n=function(i,o){var a={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.indexOf(l)<0&&(a[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(i);h<l.length;h++)o.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(i,l[h])&&(a[l[h]]=i[l[h]]);return a},u=function(i,o,a,l){var h=arguments.length,f=h<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,o,a,l);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(o,a,f):g(o,a))||f);return h>3&&f&&Object.defineProperty(o,a,f),f},s=function(i,o){return function(a,l){o(a,l,i)}},c=function(i,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,o)},d=function(i,o,a,l){function h(f){return f instanceof a?f:new a(function(g){g(f)})}return new(a||(a=Promise))(function(f,g){function b(C){try{m(l.next(C))}catch(L){g(L)}}function k(C){try{m(l.throw(C))}catch(L){g(L)}}function m(C){C.done?f(C.value):h(C.value).then(b,k)}m((l=l.apply(i,o||[])).next())})},v=function(i,o){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(m){return function(C){return k([m,C])}}function k(m){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,h&&(f=m[0]&2?h.return:m[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,m[1])).done)return f;switch(h=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,h=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){a.label=m[1];break}if(m[0]===6&&a.label<f[1]){a.label=f[1],f=m;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(m);break}f[2]&&a.ops.pop(),a.trys.pop();continue}m=o.call(i,a)}catch(C){m=[6,C],h=0}finally{l=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},G=function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]},_=function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&(o[a]=i[a])},p=function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var l=a.call(i),h,f=[],g;try{for(;(o===void 0||o-- >0)&&!(h=l.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(g)throw g.error}}return f},A=function(){for(var i=[],o=0;o<arguments.length;o++)i=i.concat(O(arguments[o]));return i},D=function(){for(var i=0,o=0,a=arguments.length;o<a;o++)i+=arguments[o].length;for(var l=Array(i),h=0,o=0;o<a;o++)for(var f=arguments[o],g=0,b=f.length;g<b;g++,h++)l[h]=f[g];return l},I=function(i){return this instanceof I?(this.v=i,this):new I(i)},P=function(i,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a.apply(i,o||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){l[T]&&(h[T]=function(q){return new Promise(function(J,j){f.push([T,q,J,j])>1||b(T,q)})})}function b(T,q){try{k(l[T](q))}catch(J){L(f[0][3],J)}}function k(T){T.value instanceof I?Promise.resolve(T.value.v).then(m,C):L(f[0][2],T)}function m(T){b("next",T)}function C(T){b("throw",T)}function L(T,q){T(q),f.shift(),f.length&&b(f[0][0],f[0][1])}},H=function(i){var o,a;return o={},l("next"),l("throw",function(h){throw h}),l("return"),o[Symbol.iterator]=function(){return this},o;function l(h,f){o[h]=i[h]?function(g){return(a=!a)?{value:I(i[h](g)),done:h==="return"}:f?f(g):g}:f}},F=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i[Symbol.asyncIterator],a;return o?o.call(i):(i=typeof p=="function"?p(i):i[Symbol.iterator](),a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a);function l(f){a[f]=i[f]&&function(g){return new Promise(function(b,k){g=i[f](g),h(b,k,g.done,g.value)})}}function h(f,g,b,k){Promise.resolve(k).then(function(m){f({value:m,done:b})},g)}},R=function(i,o){return Object.defineProperty?Object.defineProperty(i,"raw",{value:o}):i.raw=o,i},W=function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var a in i)Object.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o.default=i,o},S=function(i){return i&&i.__esModule?i:{default:i}},M=function(i,o){if(!o.has(i))throw new TypeError("attempted to get private field on non-instance");return o.get(i)},z=function(i,o,a){if(!o.has(i))throw new TypeError("attempted to set private field on non-instance");return o.set(i,a),a},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",u),w("__param",s),w("__metadata",c),w("__awaiter",d),w("__generator",v),w("__exportStar",_),w("__createBinding",G),w("__values",p),w("__read",O),w("__spread",A),w("__spreadArrays",D),w("__await",I),w("__asyncGenerator",P),w("__asyncDelegator",H),w("__asyncValues",F),w("__makeTemplateObject",R),w("__importStar",W),w("__importDefault",S),w("__classPrivateFieldGet",M),w("__classPrivateFieldSet",z)})})(Zi);var Je={},Xe={},Ze={},Kr;function Yi(){if(Kr)return Ze;Kr=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return Ze.isEmptyData=e,Ze}var Yt={},Jr;function Xr(){return Jr||(Jr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(Yt)),Yt}const Qi=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const u=e.charCodeAt(r);if(u<128)t.push(u);else if(u<2048)t.push(u>>6|192,u&63|128);else if(r+1<e.length&&(u&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const s=65536+((u&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(u>>12|224,u>>6&63|128,u&63|128)}return Uint8Array.from(t)},eo=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const u=e[r];if(u<128)t+=String.fromCharCode(u);else if(192<=u&&u<224){const s=e[++r];t+=String.fromCharCode((u&31)<<6|s&63)}else if(240<=u&&u<365){const c="%"+[u,e[++r],e[++r],e[++r]].map(d=>d.toString(16)).join("%");t+=decodeURIComponent(c)}else t+=String.fromCharCode((u&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function to(e){return new TextEncoder().encode(e)}function ro(e){return new TextDecoder("utf-8").decode(e)}const Zr=Xt(Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:e=>typeof TextEncoder=="function"?to(e):Qi(e),toUtf8:e=>typeof TextDecoder=="function"?ro(e):eo(e)},Symbol.toStringTag,{value:"Module"}))),no={};function io(){return typeof window<"u"?window:typeof self<"u"?self:no}const Qt=Xt(Object.freeze(Object.defineProperty({__proto__:null,locateWindow:io},Symbol.toStringTag,{value:"Module"})));var Yr;function Qr(){if(Yr)return Xe;Yr=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Sha256=void 0;var e=Yi(),t=Xr(),r=Zr,n=Qt,u=function(){function d(v){this.secret=v,this.reset()}return d.prototype.update=function(v){var _=this;(0,e.isEmptyData)(v)||(this.operation=this.operation.then(function(p){return p.onerror=function(){_.operation=Promise.reject(new Error("Error encountered updating hash"))},p.process(c(v)),p}),this.operation.catch(function(){}))},d.prototype.digest=function(){return this.operation.then(function(v){return new Promise(function(_,p){v.onerror=function(){p(new Error("Error encountered finalizing hash"))},v.oncomplete=function(){v.result&&_(new Uint8Array(v.result)),p(new Error("Error encountered finalizing hash"))},v.finish()})})},d.prototype.reset=function(){this.secret?(this.operation=s(this.secret).then(function(v){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,v)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},d}();Xe.Sha256=u;function s(d){return new Promise(function(v,_){var p=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",c(d),t.SHA_256_HMAC_ALGO,!1,["sign"]);p.oncomplete=function(){p.result&&v(p.result),_(new Error("ImportKey completed without importing key."))},p.onerror=function(){_(new Error("ImportKey failed to import key."))}})}function c(d){return typeof d=="string"?(0,r.fromUtf8)(d):ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(d)}return Xe}var Ye={},er={},Qe={},en;function oo(){if(en)return Qe;en=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.convertToBuffer=void 0;var e=Zr,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return Qe.convertToBuffer=r,Qe}var et={},tn;function ao(){if(tn)return et;tn=1,Object.defineProperty(et,"__esModule",{value:!0}),et.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return et.isEmptyData=e,et}var tt={},rn;function uo(){if(rn)return tt;rn=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return tt.numToUint8=e,tt}var rt={},nn;function fo(){if(nn)return rt;nn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return rt.uint32ArrayFrom=e,rt}var on;function tr(){return on||(on=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=oo();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=ao();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=uo();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var u=fo();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return u.uint32ArrayFrom}})}(er)),er}var an;function un(){if(an)return Ye;an=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Sha256=void 0;var e=tr(),t=Xr(),r=Qt,n=function(){function u(s){this.toHash=new Uint8Array(0),this.secret=s,this.reset()}return u.prototype.update=function(s){if(!(0,e.isEmptyData)(s)){var c=(0,e.convertToBuffer)(s),d=new Uint8Array(this.toHash.byteLength+c.byteLength);d.set(this.toHash,0),d.set(c,this.toHash.byteLength),this.toHash=d}},u.prototype.digest=function(){var s=this;return this.key?this.key.then(function(c){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,c,s.toHash).then(function(d){return new Uint8Array(d)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,s.toHash)}).then(function(c){return Promise.resolve(new Uint8Array(c))})},u.prototype.reset=function(){var s=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(c,d){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(s.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(c,d)}),this.key.catch(function(){}))},u}();return Ye.Sha256=n,Ye}var rr={},bt={},so={get exports(){return bt},set exports(e){bt=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var fn;function sn(){return fn||(fn=1,function(e){var t,r,n,u,s,c,d,v,_,p,O,A,D,I,P,H,F,R,W,S,M,z,G;(function(w){var V=typeof ne=="object"?ne:typeof self=="object"?self:typeof this=="object"?this:{};w(i(V,i(e.exports)));function i(o,a){return o!==V&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(l,h){return o[l]=a?a(l,h):h}}})(function(w){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])};t=function(i,o){V(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)},r=Object.assign||function(i){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h])}return i},n=function(i,o){var a={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.indexOf(l)<0&&(a[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(i);h<l.length;h++)o.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(i,l[h])&&(a[l[h]]=i[l[h]]);return a},u=function(i,o,a,l){var h=arguments.length,f=h<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,o,a,l);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(o,a,f):g(o,a))||f);return h>3&&f&&Object.defineProperty(o,a,f),f},s=function(i,o){return function(a,l){o(a,l,i)}},c=function(i,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,o)},d=function(i,o,a,l){function h(f){return f instanceof a?f:new a(function(g){g(f)})}return new(a||(a=Promise))(function(f,g){function b(C){try{m(l.next(C))}catch(L){g(L)}}function k(C){try{m(l.throw(C))}catch(L){g(L)}}function m(C){C.done?f(C.value):h(C.value).then(b,k)}m((l=l.apply(i,o||[])).next())})},v=function(i,o){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(m){return function(C){return k([m,C])}}function k(m){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,h&&(f=m[0]&2?h.return:m[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,m[1])).done)return f;switch(h=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,h=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){a.label=m[1];break}if(m[0]===6&&a.label<f[1]){a.label=f[1],f=m;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(m);break}f[2]&&a.ops.pop(),a.trys.pop();continue}m=o.call(i,a)}catch(C){m=[6,C],h=0}finally{l=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},G=function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]},_=function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&(o[a]=i[a])},p=function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var l=a.call(i),h,f=[],g;try{for(;(o===void 0||o-- >0)&&!(h=l.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(g)throw g.error}}return f},A=function(){for(var i=[],o=0;o<arguments.length;o++)i=i.concat(O(arguments[o]));return i},D=function(){for(var i=0,o=0,a=arguments.length;o<a;o++)i+=arguments[o].length;for(var l=Array(i),h=0,o=0;o<a;o++)for(var f=arguments[o],g=0,b=f.length;g<b;g++,h++)l[h]=f[g];return l},I=function(i){return this instanceof I?(this.v=i,this):new I(i)},P=function(i,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a.apply(i,o||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){l[T]&&(h[T]=function(q){return new Promise(function(J,j){f.push([T,q,J,j])>1||b(T,q)})})}function b(T,q){try{k(l[T](q))}catch(J){L(f[0][3],J)}}function k(T){T.value instanceof I?Promise.resolve(T.value.v).then(m,C):L(f[0][2],T)}function m(T){b("next",T)}function C(T){b("throw",T)}function L(T,q){T(q),f.shift(),f.length&&b(f[0][0],f[0][1])}},H=function(i){var o,a;return o={},l("next"),l("throw",function(h){throw h}),l("return"),o[Symbol.iterator]=function(){return this},o;function l(h,f){o[h]=i[h]?function(g){return(a=!a)?{value:I(i[h](g)),done:h==="return"}:f?f(g):g}:f}},F=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i[Symbol.asyncIterator],a;return o?o.call(i):(i=typeof p=="function"?p(i):i[Symbol.iterator](),a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a);function l(f){a[f]=i[f]&&function(g){return new Promise(function(b,k){g=i[f](g),h(b,k,g.done,g.value)})}}function h(f,g,b,k){Promise.resolve(k).then(function(m){f({value:m,done:b})},g)}},R=function(i,o){return Object.defineProperty?Object.defineProperty(i,"raw",{value:o}):i.raw=o,i},W=function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var a in i)Object.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o.default=i,o},S=function(i){return i&&i.__esModule?i:{default:i}},M=function(i,o){if(!o.has(i))throw new TypeError("attempted to get private field on non-instance");return o.get(i)},z=function(i,o,a){if(!o.has(i))throw new TypeError("attempted to set private field on non-instance");return o.set(i,a),a},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",u),w("__param",s),w("__metadata",c),w("__awaiter",d),w("__generator",v),w("__exportStar",_),w("__createBinding",G),w("__values",p),w("__read",O),w("__spread",A),w("__spreadArrays",D),w("__await",I),w("__asyncGenerator",P),w("__asyncDelegator",H),w("__asyncValues",F),w("__makeTemplateObject",R),w("__importStar",W),w("__importDefault",S),w("__classPrivateFieldGet",M),w("__classPrivateFieldSet",z)})}(so)),bt}var nt={},ee={},cn;function ln(){return cn||(cn=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.MAX_HASHABLE_LENGTH=ee.INIT=ee.KEY=ee.DIGEST_LENGTH=ee.BLOCK_SIZE=void 0,ee.BLOCK_SIZE=64,ee.DIGEST_LENGTH=32,ee.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ee.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ee.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ee}var it={},dn;function co(){if(dn)return it;dn=1,Object.defineProperty(it,"__esModule",{value:!0}),it.RawSha256=void 0;var e=ln(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var u=0,s=n.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=n[u++],s--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,u=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(u.setUint8(this.bufferLength++,128),s%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var c=this.bufferLength;c<e.BLOCK_SIZE;c++)u.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(var c=this.bufferLength;c<e.BLOCK_SIZE-8;c++)u.setUint8(c,0);u.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),u.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var d=new Uint8Array(e.DIGEST_LENGTH),c=0;c<8;c++)d[c*4]=this.state[c]>>>24&255,d[c*4+1]=this.state[c]>>>16&255,d[c*4+2]=this.state[c]>>>8&255,d[c*4+3]=this.state[c]>>>0&255;return d},r.prototype.hashBuffer=function(){for(var n=this,u=n.buffer,s=n.state,c=s[0],d=s[1],v=s[2],_=s[3],p=s[4],O=s[5],A=s[6],D=s[7],I=0;I<e.BLOCK_SIZE;I++){if(I<16)this.temp[I]=(u[I*4]&255)<<24|(u[I*4+1]&255)<<16|(u[I*4+2]&255)<<8|u[I*4+3]&255;else{var P=this.temp[I-2],H=(P>>>17|P<<15)^(P>>>19|P<<13)^P>>>10;P=this.temp[I-15];var F=(P>>>7|P<<25)^(P>>>18|P<<14)^P>>>3;this.temp[I]=(H+this.temp[I-7]|0)+(F+this.temp[I-16]|0)}var R=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&O^~p&A)|0)+(D+(e.KEY[I]+this.temp[I]|0)|0)|0,W=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&d^c&v^d&v)|0;D=A,A=O,O=p,p=_+R|0,_=v,v=d,d=c,c=R+W|0}s[0]+=c,s[1]+=d,s[2]+=v,s[3]+=_,s[4]+=p,s[5]+=O,s[6]+=A,s[7]+=D},r}();return it.RawSha256=t,it}var hn;function lo(){if(hn)return nt;hn=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.Sha256=void 0;var e=sn(),t=ln(),r=co(),n=tr(),u=function(){function c(d){this.secret=d,this.hash=new r.RawSha256,this.reset()}return c.prototype.update=function(d){if(!((0,n.isEmptyData)(d)||this.error))try{this.hash.update((0,n.convertToBuffer)(d))}catch(v){this.error=v}},c.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},c.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(d){return[2,this.digestSync()]})})},c.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var d=s(this.secret),v=new Uint8Array(t.BLOCK_SIZE);v.set(d);for(var _=0;_<t.BLOCK_SIZE;_++)d[_]^=54,v[_]^=92;this.hash.update(d),this.outer.update(v);for(var _=0;_<d.byteLength;_++)d[_]=0}},c}();nt.Sha256=u;function s(c){var d=(0,n.convertToBuffer)(c);if(d.byteLength>t.BLOCK_SIZE){var v=new r.RawSha256;v.update(d),d=v.digest()}var _=new Uint8Array(t.BLOCK_SIZE);return _.set(d),_}return nt}var vn;function ho(){return vn||(vn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=sn();t.__exportStar(lo(),e)}(rr)),rr}var nr={},St={},vo={get exports(){return St},set exports(e){St=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var yn;function pn(){return yn||(yn=1,function(e){var t,r,n,u,s,c,d,v,_,p,O,A,D,I,P,H,F,R,W,S,M,z,G;(function(w){var V=typeof ne=="object"?ne:typeof self=="object"?self:typeof this=="object"?this:{};w(i(V,i(e.exports)));function i(o,a){return o!==V&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(l,h){return o[l]=a?a(l,h):h}}})(function(w){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])};t=function(i,o){V(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)},r=Object.assign||function(i){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h])}return i},n=function(i,o){var a={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.indexOf(l)<0&&(a[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(i);h<l.length;h++)o.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(i,l[h])&&(a[l[h]]=i[l[h]]);return a},u=function(i,o,a,l){var h=arguments.length,f=h<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,o,a,l);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(o,a,f):g(o,a))||f);return h>3&&f&&Object.defineProperty(o,a,f),f},s=function(i,o){return function(a,l){o(a,l,i)}},c=function(i,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,o)},d=function(i,o,a,l){function h(f){return f instanceof a?f:new a(function(g){g(f)})}return new(a||(a=Promise))(function(f,g){function b(C){try{m(l.next(C))}catch(L){g(L)}}function k(C){try{m(l.throw(C))}catch(L){g(L)}}function m(C){C.done?f(C.value):h(C.value).then(b,k)}m((l=l.apply(i,o||[])).next())})},v=function(i,o){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(m){return function(C){return k([m,C])}}function k(m){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,h&&(f=m[0]&2?h.return:m[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,m[1])).done)return f;switch(h=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,h=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){a.label=m[1];break}if(m[0]===6&&a.label<f[1]){a.label=f[1],f=m;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(m);break}f[2]&&a.ops.pop(),a.trys.pop();continue}m=o.call(i,a)}catch(C){m=[6,C],h=0}finally{l=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},G=function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]},_=function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&(o[a]=i[a])},p=function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var l=a.call(i),h,f=[],g;try{for(;(o===void 0||o-- >0)&&!(h=l.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(g)throw g.error}}return f},A=function(){for(var i=[],o=0;o<arguments.length;o++)i=i.concat(O(arguments[o]));return i},D=function(){for(var i=0,o=0,a=arguments.length;o<a;o++)i+=arguments[o].length;for(var l=Array(i),h=0,o=0;o<a;o++)for(var f=arguments[o],g=0,b=f.length;g<b;g++,h++)l[h]=f[g];return l},I=function(i){return this instanceof I?(this.v=i,this):new I(i)},P=function(i,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a.apply(i,o||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){l[T]&&(h[T]=function(q){return new Promise(function(J,j){f.push([T,q,J,j])>1||b(T,q)})})}function b(T,q){try{k(l[T](q))}catch(J){L(f[0][3],J)}}function k(T){T.value instanceof I?Promise.resolve(T.value.v).then(m,C):L(f[0][2],T)}function m(T){b("next",T)}function C(T){b("throw",T)}function L(T,q){T(q),f.shift(),f.length&&b(f[0][0],f[0][1])}},H=function(i){var o,a;return o={},l("next"),l("throw",function(h){throw h}),l("return"),o[Symbol.iterator]=function(){return this},o;function l(h,f){o[h]=i[h]?function(g){return(a=!a)?{value:I(i[h](g)),done:h==="return"}:f?f(g):g}:f}},F=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i[Symbol.asyncIterator],a;return o?o.call(i):(i=typeof p=="function"?p(i):i[Symbol.iterator](),a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a);function l(f){a[f]=i[f]&&function(g){return new Promise(function(b,k){g=i[f](g),h(b,k,g.done,g.value)})}}function h(f,g,b,k){Promise.resolve(k).then(function(m){f({value:m,done:b})},g)}},R=function(i,o){return Object.defineProperty?Object.defineProperty(i,"raw",{value:o}):i.raw=o,i},W=function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var a in i)Object.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o.default=i,o},S=function(i){return i&&i.__esModule?i:{default:i}},M=function(i,o){if(!o.has(i))throw new TypeError("attempted to get private field on non-instance");return o.get(i)},z=function(i,o,a){if(!o.has(i))throw new TypeError("attempted to set private field on non-instance");return o.set(i,a),a},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",u),w("__param",s),w("__metadata",c),w("__awaiter",d),w("__generator",v),w("__exportStar",_),w("__createBinding",G),w("__values",p),w("__read",O),w("__spread",A),w("__spreadArrays",D),w("__await",I),w("__asyncGenerator",P),w("__asyncDelegator",H),w("__asyncValues",F),w("__makeTemplateObject",R),w("__importStar",W),w("__importDefault",S),w("__classPrivateFieldGet",M),w("__classPrivateFieldSet",z)})}(vo)),St}var ae={},gn;function yo(){if(gn)return ae;gn=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.supportsZeroByteGCM=ae.supportsSubtleCrypto=ae.supportsSecureRandom=ae.supportsWebCrypto=void 0;var e=pn(),t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(c){if(n(c)&&typeof c.crypto.subtle=="object"){var d=c.crypto.subtle;return u(d)}return!1}ae.supportsWebCrypto=r;function n(c){if(typeof c=="object"&&typeof c.crypto=="object"){var d=c.crypto.getRandomValues;return typeof d=="function"}return!1}ae.supportsSecureRandom=n;function u(c){return c&&t.every(function(d){return typeof c[d]=="function"})}ae.supportsSubtleCrypto=u;function s(c){return e.__awaiter(this,void 0,void 0,function(){var d,v;return e.__generator(this,function(_){switch(_.label){case 0:if(!u(c))return[2,!1];_.label=1;case 1:return _.trys.push([1,4,,5]),[4,c.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return d=_.sent(),[4,c.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},d,new Uint8Array(0))];case 3:return v=_.sent(),[2,v.byteLength===16];case 4:return _.sent(),[2,!1];case 5:return[2]}})})}return ae.supportsZeroByteGCM=s,ae}var mn;function po(){return mn||(mn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=pn();t.__exportStar(yo(),e)}(nr)),nr}var ir={},Ot={},go={get exports(){return Ot},set exports(e){Ot=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var _n;function mo(){return _n||(_n=1,function(e){var t,r,n,u,s,c,d,v,_,p,O,A,D,I,P,H,F,R,W,S,M,z,G;(function(w){var V=typeof ne=="object"?ne:typeof self=="object"?self:typeof this=="object"?this:{};w(i(V,i(e.exports)));function i(o,a){return o!==V&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(l,h){return o[l]=a?a(l,h):h}}})(function(w){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])};t=function(i,o){V(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)},r=Object.assign||function(i){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h])}return i},n=function(i,o){var a={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.indexOf(l)<0&&(a[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(i);h<l.length;h++)o.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(i,l[h])&&(a[l[h]]=i[l[h]]);return a},u=function(i,o,a,l){var h=arguments.length,f=h<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,o,a,l);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(o,a,f):g(o,a))||f);return h>3&&f&&Object.defineProperty(o,a,f),f},s=function(i,o){return function(a,l){o(a,l,i)}},c=function(i,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,o)},d=function(i,o,a,l){function h(f){return f instanceof a?f:new a(function(g){g(f)})}return new(a||(a=Promise))(function(f,g){function b(C){try{m(l.next(C))}catch(L){g(L)}}function k(C){try{m(l.throw(C))}catch(L){g(L)}}function m(C){C.done?f(C.value):h(C.value).then(b,k)}m((l=l.apply(i,o||[])).next())})},v=function(i,o){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(m){return function(C){return k([m,C])}}function k(m){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,h&&(f=m[0]&2?h.return:m[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,m[1])).done)return f;switch(h=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,h=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){a.label=m[1];break}if(m[0]===6&&a.label<f[1]){a.label=f[1],f=m;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(m);break}f[2]&&a.ops.pop(),a.trys.pop();continue}m=o.call(i,a)}catch(C){m=[6,C],h=0}finally{l=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},G=function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]},_=function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&(o[a]=i[a])},p=function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var l=a.call(i),h,f=[],g;try{for(;(o===void 0||o-- >0)&&!(h=l.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(g)throw g.error}}return f},A=function(){for(var i=[],o=0;o<arguments.length;o++)i=i.concat(O(arguments[o]));return i},D=function(){for(var i=0,o=0,a=arguments.length;o<a;o++)i+=arguments[o].length;for(var l=Array(i),h=0,o=0;o<a;o++)for(var f=arguments[o],g=0,b=f.length;g<b;g++,h++)l[h]=f[g];return l},I=function(i){return this instanceof I?(this.v=i,this):new I(i)},P=function(i,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a.apply(i,o||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){l[T]&&(h[T]=function(q){return new Promise(function(J,j){f.push([T,q,J,j])>1||b(T,q)})})}function b(T,q){try{k(l[T](q))}catch(J){L(f[0][3],J)}}function k(T){T.value instanceof I?Promise.resolve(T.value.v).then(m,C):L(f[0][2],T)}function m(T){b("next",T)}function C(T){b("throw",T)}function L(T,q){T(q),f.shift(),f.length&&b(f[0][0],f[0][1])}},H=function(i){var o,a;return o={},l("next"),l("throw",function(h){throw h}),l("return"),o[Symbol.iterator]=function(){return this},o;function l(h,f){o[h]=i[h]?function(g){return(a=!a)?{value:I(i[h](g)),done:h==="return"}:f?f(g):g}:f}},F=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i[Symbol.asyncIterator],a;return o?o.call(i):(i=typeof p=="function"?p(i):i[Symbol.iterator](),a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a);function l(f){a[f]=i[f]&&function(g){return new Promise(function(b,k){g=i[f](g),h(b,k,g.done,g.value)})}}function h(f,g,b,k){Promise.resolve(k).then(function(m){f({value:m,done:b})},g)}},R=function(i,o){return Object.defineProperty?Object.defineProperty(i,"raw",{value:o}):i.raw=o,i},W=function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var a in i)Object.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o.default=i,o},S=function(i){return i&&i.__esModule?i:{default:i}},M=function(i,o){if(!o.has(i))throw new TypeError("attempted to get private field on non-instance");return o.get(i)},z=function(i,o,a){if(!o.has(i))throw new TypeError("attempted to set private field on non-instance");return o.set(i,a),a},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",u),w("__param",s),w("__metadata",c),w("__awaiter",d),w("__generator",v),w("__exportStar",_),w("__createBinding",G),w("__values",p),w("__read",O),w("__spread",A),w("__spreadArrays",D),w("__await",I),w("__asyncGenerator",P),w("__asyncDelegator",H),w("__asyncValues",F),w("__makeTemplateObject",R),w("__importStar",W),w("__importDefault",S),w("__classPrivateFieldGet",M),w("__classPrivateFieldSet",z)})}(go)),Ot}var or={},wn;function _o(){return wn||(wn=1,Object.defineProperty(or,"__esModule",{value:!0})),or}var ar={},bn;function wo(){return bn||(bn=1,Object.defineProperty(ar,"__esModule",{value:!0})),ar}var ur={},Sn;function bo(){return Sn||(Sn=1,Object.defineProperty(ur,"__esModule",{value:!0})),ur}var fr={},On;function So(){return On||(On=1,Object.defineProperty(fr,"__esModule",{value:!0})),fr}var ot={},Pn;function Oo(){if(Pn)return ot;Pn=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var u=n.msCrypto,s=u.getRandomValues,c=u.subtle;return e.map(function(d){return c[d]}).concat(s).every(function(d){return typeof d=="function"})}return!1}return ot.isMsWindow=r,ot}var xn;function Po(){return xn||(xn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=mo();t.__exportStar(_o(),e),t.__exportStar(wo(),e),t.__exportStar(bo(),e),t.__exportStar(So(),e),t.__exportStar(Oo(),e)}(ir)),ir}var Tn;function xo(){if(Tn)return Je;Tn=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Sha256=void 0;var e=Qr(),t=un(),r=ho(),n=po(),u=Po(),s=Qt,c=tr(),d=function(){function v(_){(0,n.supportsWebCrypto)((0,s.locateWindow)())?this.hash=new t.Sha256(_):(0,u.isMsWindow)((0,s.locateWindow)())?this.hash=new e.Sha256(_):this.hash=new r.Sha256(_)}return v.prototype.update=function(_,p){this.hash.update((0,c.convertToBuffer)(_))},v.prototype.digest=function(){return this.hash.digest()},v.prototype.reset=function(){this.hash.reset()},v}();return Je.Sha256=d,Je}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=Zt;t.__exportStar(xo(),e);var r=Qr();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=un();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(zr);var le=function(){return le=Object.assign||function(t){for(var r,n=1,u=arguments.length;n<u;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},le.apply(this,arguments)};function we(e,t,r){if(r||arguments.length===2)for(var n=0,u=t.length,s;n<u;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var Pt={},An={get exports(){return Pt},set exports(e){Pt=e}},In=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(In){var En=new Uint8Array(16);An.exports=function(){return In(En),En}}else{var jn=new Array(16);An.exports=function(){for(var t=0,r;t<16;t++)t&3||(r=Math.random()*4294967296),jn[t]=r>>>((t&3)<<3)&255;return jn}}for(var Cn=[],xt=0;xt<256;++xt)Cn[xt]=(xt+256).toString(16).substr(1);function To(e,t){var r=t||0,n=Cn;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}var Rn=To,Ao=Pt,Io=Rn,kn,sr,cr=0,lr=0;function Eo(e,t,r){var n=t&&r||0,u=t||[];e=e||{};var s=e.node||kn,c=e.clockseq!==void 0?e.clockseq:sr;if(s==null||c==null){var d=Ao();s==null&&(s=kn=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),c==null&&(c=sr=(d[6]<<8|d[7])&16383)}var v=e.msecs!==void 0?e.msecs:new Date().getTime(),_=e.nsecs!==void 0?e.nsecs:lr+1,p=v-cr+(_-lr)/1e4;if(p<0&&e.clockseq===void 0&&(c=c+1&16383),(p<0||v>cr)&&e.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");cr=v,lr=_,sr=c,v+=122192928e5;var O=((v&268435455)*1e4+_)%4294967296;u[n++]=O>>>24&255,u[n++]=O>>>16&255,u[n++]=O>>>8&255,u[n++]=O&255;var A=v/4294967296*1e4&268435455;u[n++]=A>>>8&255,u[n++]=A&255,u[n++]=A>>>24&15|16,u[n++]=A>>>16&255,u[n++]=c>>>8|128,u[n++]=c&255;for(var D=0;D<6;++D)u[n+D]=s[D];return t||Io(u)}var jo=Eo,Co=Pt,Ro=Rn;function ko(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var u=e.random||(e.rng||Co)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,t)for(var s=0;s<16;++s)t[n+s]=u[s];return t||Ro(u)}var Do=ko,Bo=jo,Dn=Do,dr=Dn;dr.v1=Bo,dr.v4=Dn;var be=dr;/*!
 * Core functionality for Snowplow JavaScript trackers v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */var Uo="3.8.0";function Mo(e){if(!e)return e;var t=4-e.length%4;switch(t){case 2:e+="==";break;case 3:e+="=";break}var r=e.replace(/-/g,"+").replace(/_/g,"/");return $o(r)}function Lo(e){if(!e)return e;var t=qo(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qo(e){var t,r,n,u,s,c,d,v,_=0,p=0,O=[];if(!e)return e;e=unescape(encodeURIComponent(e));do t=e.charCodeAt(_++),r=e.charCodeAt(_++),n=e.charCodeAt(_++),v=t<<16|r<<8|n,u=v>>18&63,s=v>>12&63,c=v>>6&63,d=v&63,O[p++]=Se.charAt(u)+Se.charAt(s)+Se.charAt(c)+Se.charAt(d);while(_<e.length);var A=O.join(""),D=e.length%3;return(D?A.slice(0,D-3):A)+"===".slice(D||3)}function $o(e){var t=function(I){return decodeURIComponent(I.split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))},r,n,u,s,c,d,v,_,p=0,O=0,A="",D=[];if(!e)return e;e+="";do s=Se.indexOf(e.charAt(p++)),c=Se.indexOf(e.charAt(p++)),d=Se.indexOf(e.charAt(p++)),v=Se.indexOf(e.charAt(p++)),_=s<<18|c<<12|d<<6|v,r=_>>16&255,n=_>>8&255,u=_&255,d===64?D[O++]=String.fromCharCode(r):v===64?D[O++]=String.fromCharCode(r,n):D[O++]=String.fromCharCode(r,n,u);while(p<e.length);return A=D.join(""),t(A.replace(/\0+$/,""))}function at(){var e={},t=[],r=[],n=[],u,s=function(_,p){p!=null&&p!==""&&(e[_]=p)},c=function(_){for(var p in _)Object.prototype.hasOwnProperty.call(_,p)&&s(p,_[p])},d=function(_,p,O){if(O&&Bn(O)){var A={keyIfEncoded:_,keyIfNotEncoded:p,json:O};r.push(A),t.push(A)}},v=function(_){n.push(_)};return{add:s,addDict:c,addJson:d,addContextEntity:v,getPayload:function(){return e},getJson:function(){return t},withJsonProcessor:function(_){u=_},build:function(){return u==null||u(this,r,n),e}}}function Ho(e){return function(t,r,n){for(var u=function(A,D,I){var P=JSON.stringify(A);e?t.add(D,Lo(P)):t.add(I,P)},s=function(){var A=t.getPayload();if(e?A.cx:A.co)return JSON.parse(e?Mo(A.cx):A.co)},c=function(A,D){var I=A||s();return I?I.data=I.data.concat(D.data):I=D,I},d=void 0,v=0,_=r;v<_.length;v++){var p=_[v];p.keyIfEncoded==="cx"?d=c(d,p.json):u(p.json,p.keyIfEncoded,p.keyIfNotEncoded)}if(r.length=0,n.length){var O={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:we([],n,!0)};d=c(d,O),n.length=0}d&&u(d,"cx","co")}}function Bn(e){if(!Un(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function Un(e){return typeof e<"u"&&e!==null&&(e.constructor==={}.constructor||e.constructor===[].constructor)}var Tt="Snowplow: ",ye;(function(e){e[e.none=0]="none",e[e.error=1]="error",e[e.warn=2]="warn",e[e.debug=3]="debug",e[e.info=4]="info"})(ye||(ye={}));var ue=No();function No(e){e===void 0&&(e=ye.warn);function t(c){ye[c]?e=c:e=ye.warn}function r(c,d){for(var v=[],_=2;_<arguments.length;_++)v[_-2]=arguments[_];if(e>=ye.error&&typeof console<"u"){var p=Tt+c+`
`;d?console.error.apply(console,we([p+`
`,d],v,!1)):console.error.apply(console,we([p],v,!1))}}function n(c,d){for(var v=[],_=2;_<arguments.length;_++)v[_-2]=arguments[_];if(e>=ye.warn&&typeof console<"u"){var p=Tt+c;d?console.warn.apply(console,we([p+`
`,d],v,!1)):console.warn.apply(console,we([p],v,!1))}}function u(c){for(var d=[],v=1;v<arguments.length;v++)d[v-1]=arguments[v];e>=ye.debug&&typeof console<"u"&&console.debug.apply(console,we([Tt+c],d,!1))}function s(c){for(var d=[],v=1;v<arguments.length;v++)d[v-1]=arguments[v];e>=ye.info&&typeof console<"u"&&console.info.apply(console,we([Tt+c],d,!1))}return{setLogLevel:t,warn:n,error:r,debug:u,info:s}}function Fo(){var e=[],t=[],r=function(n){var u=Zo(n),s=Yo(n),c=[],d=vr(e,n,s,u);c.push.apply(c,d);var v=ra(t,n,s,u);return c.push.apply(c,v),c};return{getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return t},addGlobalContexts:function(n){for(var u=[],s=[],c=0,d=n;c<d.length;c++){var v=d[c];Nn(v)?u.push(v):He(v)&&s.push(v)}e=e.concat(s),t=t.concat(u)},clearGlobalContexts:function(){t=[],e=[]},removeGlobalContexts:function(n){for(var u=function(v){Nn(v)?t=t.filter(function(_){return JSON.stringify(_)!==JSON.stringify(v)}):He(v)&&(e=e.filter(function(_){return JSON.stringify(_)!==JSON.stringify(v)}))},s=0,c=n;s<c.length;s++){var d=c[s];u(d)}},getApplicableContexts:function(n){return r(n)}}}function Go(e){return{addPluginContexts:function(t){var r=t?we([],t,!0):[];return e.forEach(function(n){try{n.contexts&&r.push.apply(r,n.contexts())}catch(u){ue.error("Error adding plugin contexts",u)}}),r}}}function Vo(e){var t=new RegExp("^iglu:([a-zA-Z0-9-_.]+)/([a-zA-Z0-9-_]+)/jsonschema/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$"),r=t.exec(e);if(r!==null)return r.slice(1,6)}function Wo(e){if(e[0]==="*"||e[1]==="*")return!1;if(e.slice(2).length>0){for(var t=!1,r=0,n=e.slice(2);r<n.length;r++){var u=n[r];if(u==="*")t=!0;else if(t)return!1}return!0}else if(e.length==2)return!0;return!1}function Mn(e){var t=e.split(".");return t&&t.length>1?Wo(t):!1}function Ln(e){var t=new RegExp("^iglu:((?:(?:[a-zA-Z0-9-_]+|\\*).)+(?:[a-zA-Z0-9-_]+|\\*))/([a-zA-Z0-9-_.]+|\\*)/jsonschema/([1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)$"),r=t.exec(e);if(r!==null&&Mn(r[1]))return r.slice(1,6)}function hr(e){var t=Ln(e);if(t){var r=t[0];return t.length===5&&Mn(r)}return!1}function zo(e){return Array.isArray(e)&&e.every(function(t){return typeof t=="string"})}function qn(e){return zo(e)?e.every(function(t){return hr(t)}):typeof e=="string"?hr(e):!1}function ut(e){var t=e;return Bn(t)&&"schema"in t&&"data"in t?typeof t.schema=="string"&&typeof t.data=="object":!1}function Ko(e){var t=e,r=0;if(e!=null&&typeof e=="object"&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(t,"accept"))if(qn(t.accept))r+=1;else return!1;if(Object.prototype.hasOwnProperty.call(t,"reject"))if(qn(t.reject))r+=1;else return!1;return r>0&&r<=2}return!1}function At(e){return typeof e=="function"&&e.length<=1}function He(e){return At(e)||ut(e)}function $n(e){return Array.isArray(e)&&e.length===2?Array.isArray(e[1])?At(e[0])&&e[1].every(He):At(e[0])&&He(e[1]):!1}function Hn(e){return Array.isArray(e)&&e.length===2&&Ko(e[0])?Array.isArray(e[1])?e[1].every(He):He(e[1]):!1}function Nn(e){return $n(e)||Hn(e)}function Jo(e,t){var r=0,n=0,u=e.accept;Array.isArray(u)?e.accept.some(function(c){return It(c,t)})&&n++:typeof u=="string"&&It(u,t)&&n++;var s=e.reject;return Array.isArray(s)?e.reject.some(function(c){return It(c,t)})&&r++:typeof s=="string"&&It(s,t)&&r++,n>0&&r===0?!0:(n===0&&r>0,!1)}function It(e,t){if(!hr(e))return!1;var r=Ln(e),n=Vo(t);if(r&&n){if(!Xo(r[0],n[0]))return!1;for(var u=1;u<5;u++)if(!Fn(r[u],n[u]))return!1;return!0}return!1}function Xo(e,t){var r=t.split("."),n=e.split(".");if(r&&n){if(r.length!==n.length)return!1;for(var u=0;u<n.length;u++)if(!Fn(r[u],n[u]))return!1;return!0}return!1}function Fn(e,t){return e&&t&&e==="*"||e===t}function Zo(e){for(var t=e.getJson(),r=0,n=t;r<n.length;r++){var u=n[r];if(u.keyIfEncoded==="ue_px"&&typeof u.json.data=="object"){var s=u.json.data.schema;if(typeof s=="string")return s}}return""}function Yo(e){var t=e.getPayload().e;return typeof t=="string"?t:""}function Qo(e,t,r,n){var u=void 0;try{var s={event:t.getPayload(),eventType:r,eventSchema:n};return u=e(s),Array.isArray(u)&&u.every(ut)||ut(u)?u:void 0}catch{u=void 0}return u}function Gn(e){return Array.isArray(e)?e:Array.of(e)}function vr(e,t,r,n){var u,s=Gn(e),c=function(v){var _=ea(v,t,r,n);if(_&&_.length!==0)return _},d=s.map(c);return(u=[]).concat.apply(u,d.filter(function(v){return v!=null&&v.filter(Boolean)}))}function ea(e,t,r,n){if(ut(e))return[e];if(At(e)){var u=Qo(e,t,r,n);if(ut(u))return[u];if(Array.isArray(u))return u}}function ta(e,t,r,n){if($n(e)){var u=e[0],s=!1;try{var c={event:t.getPayload(),eventType:r,eventSchema:n};s=u(c)}catch{s=!1}if(s===!0)return vr(e[1],t,r,n)}else if(Hn(e)&&Jo(e[0],n))return vr(e[1],t,r,n);return[]}function ra(e,t,r,n){var u,s=Gn(e),c=function(v){var _=ta(v,t,r,n);if(_&&_.length!==0)return _},d=s.map(c);return(u=[]).concat.apply(u,d.filter(function(v){return v!=null&&v.filter(Boolean)}))}function na(e){return e==null?{type:"dtm",value:new Date().getTime()}:typeof e=="number"?{type:"dtm",value:e}:e.type==="ttm"?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||new Date().getTime()}}function ia(e){e===void 0&&(e={});function t(v,_,p){var O=Go(_),A=Fo(),D=v,I={};function P(S){if(S&&S.length)return{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:S}}function H(S,M){var z=A.getApplicableContexts(S),G=[];return M&&M.length&&G.push.apply(G,M),z&&z.length&&G.push.apply(G,z),G}function F(S,M,z){S.withJsonProcessor(Ho(D)),S.add("eid",be.v4()),S.addDict(I);var G=na(z);S.add(G.type,G.value.toString());var w=H(S,O.addPluginContexts(M)),V=P(w);V!==void 0&&S.addJson("cx","co",V),_.forEach(function(o){try{o.beforeTrack&&o.beforeTrack(S)}catch(a){ue.error("Plugin beforeTrack",a)}}),typeof p=="function"&&p(S);var i=S.build();return _.forEach(function(o){try{o.afterTrack&&o.afterTrack(i)}catch(a){ue.error("Plugin afterTrack",a)}}),i}function R(S,M){I[S]=M}var W={track:F,addPayloadPair:R,getBase64Encoding:function(){return D},setBase64Encoding:function(S){D=S},addPayloadDict:function(S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(I[M]=S[M])},resetPayloadPairs:function(S){I=Un(S)?S:{}},setTrackerVersion:function(S){R("tv",S)},setTrackerNamespace:function(S){R("tna",S)},setAppId:function(S){R("aid",S)},setPlatform:function(S){R("p",S)},setUserId:function(S){R("uid",S)},setScreenResolution:function(S,M){R("res",S+"x"+M)},setViewport:function(S,M){R("vp",S+"x"+M)},setColorDepth:function(S){R("cd",S)},setTimezone:function(S){R("tz",S)},setLang:function(S){R("lang",S)},setIpAddress:function(S){R("ip",S)},setUseragent:function(S){R("ua",S)},addGlobalContexts:function(S){A.addGlobalContexts(S)},clearGlobalContexts:function(){A.clearGlobalContexts()},removeGlobalContexts:function(S){A.removeGlobalContexts(S)}};return W}var r=e.base64,n=e.corePlugins,u=e.callback,s=n??[],c=t(r??!0,s,u),d=le(le({},c),{addPlugin:function(v){var _,p,O=v.plugin;s.push(O),(_=O.logger)===null||_===void 0||_.call(O,ue),(p=O.activateCorePlugin)===null||p===void 0||p.call(O,d)}});return s==null||s.forEach(function(v){var _,p;(_=v.logger)===null||_===void 0||_.call(v,ue),(p=v.activateCorePlugin)===null||p===void 0||p.call(v,d)}),d}function yr(e){var t=e.event,r=t.schema,n=t.data,u=at(),s={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:r,data:n}};return u.add("e","ue"),u.addJson("ue_px","ue_pr",s),u}function oa(e){var t=e.pageUrl,r=e.pageTitle,n=e.referrer,u=at();return u.add("e","pv"),u.add("url",t),u.add("page",r),u.add("refr",n),u}function aa(e){var t=e.pageUrl,r=e.pageTitle,n=e.referrer,u=e.minXOffset,s=e.maxXOffset,c=e.minYOffset,d=e.maxYOffset,v=at();return v.add("e","pp"),v.add("url",t),v.add("page",r),v.add("refr",n),u&&!isNaN(Number(u))&&v.add("pp_mix",u.toString()),s&&!isNaN(Number(s))&&v.add("pp_max",s.toString()),c&&!isNaN(Number(c))&&v.add("pp_miy",c.toString()),d&&!isNaN(Number(d))&&v.add("pp_may",d.toString()),v}function ua(e){var t=e.orderId,r=e.total,n=e.affiliation,u=e.tax,s=e.shipping,c=e.city,d=e.state,v=e.country,_=e.currency,p=at();return p.add("e","tr"),p.add("tr_id",t),p.add("tr_af",n),p.add("tr_tt",r),p.add("tr_tx",u),p.add("tr_sh",s),p.add("tr_ci",c),p.add("tr_st",d),p.add("tr_co",v),p.add("tr_cu",_),p}function fa(e){var t=e.orderId,r=e.sku,n=e.price,u=e.name,s=e.category,c=e.quantity,d=e.currency,v=at();return v.add("e","ti"),v.add("ti_id",t),v.add("ti_sk",r),v.add("ti_nm",u),v.add("ti_ca",s),v.add("ti_pr",n),v.add("ti_qu",c),v.add("ti_cu",d),v}function sa(e){var t=e.sku,r=e.quantity,n=e.name,u=e.category,s=e.unitPrice,c=e.currency;return yr({event:{schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:Vn({sku:t,quantity:r,name:n,category:u,unitPrice:s,currency:c})}})}function ca(e){var t=e.sku,r=e.quantity,n=e.name,u=e.category,s=e.unitPrice,c=e.currency;return yr({event:{schema:"iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0",data:Vn({sku:t,quantity:r,name:n,category:u,unitPrice:s,currency:c})}})}function Vn(e,t){t===void 0&&(t={});var r={};for(var n in e)(t[n]||e[n]!==null&&typeof e[n]<"u")&&(r[n]=e[n]);return r}var la=Uo,pr={},da={get exports(){return pr},set exports(e){pr=e}},gr={},ha={get exports(){return gr},set exports(e){gr=e}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],u=0,s=0;u<r.length;u++,s+=8)n[s>>>5]|=r[u]<<24-s%32;return n},wordsToBytes:function(r){for(var n=[],u=0;u<r.length*32;u+=8)n.push(r[u>>>5]>>>24-u%32&255);return n},bytesToHex:function(r){for(var n=[],u=0;u<r.length;u++)n.push((r[u]>>>4).toString(16)),n.push((r[u]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],u=0;u<r.length;u+=2)n.push(parseInt(r.substr(u,2),16));return n},bytesToBase64:function(r){for(var n=[],u=0;u<r.length;u+=3)for(var s=r[u]<<16|r[u+1]<<8|r[u+2],c=0;c<4;c++)u*8+c*6<=r.length*8?n.push(e.charAt(s>>>6*(3-c)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],u=0,s=0;u<r.length;s=++u%4)s!=0&&n.push((e.indexOf(r.charAt(u-1))&Math.pow(2,-2*s+8)-1)<<s*2|e.indexOf(r.charAt(u))>>>6-s*2);return n}};ha.exports=t})();var mr={utf8:{stringToBytes:function(e){return mr.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(mr.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},Wn=mr;(function(){var e=gr,t=Wn.utf8,r=Wn.bin,n=function(s){s.constructor==String?s=t.stringToBytes(s):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||(s=s.toString());var c=e.bytesToWords(s),d=s.length*8,v=[],_=1732584193,p=-271733879,O=-1732584194,A=271733878,D=-1009589776;c[d>>5]|=128<<24-d%32,c[(d+64>>>9<<4)+15]=d;for(var I=0;I<c.length;I+=16){for(var P=_,H=p,F=O,R=A,W=D,S=0;S<80;S++){if(S<16)v[S]=c[I+S];else{var M=v[S-3]^v[S-8]^v[S-14]^v[S-16];v[S]=M<<1|M>>>31}var z=(_<<5|_>>>27)+D+(v[S]>>>0)+(S<20?(p&O|~p&A)+1518500249:S<40?(p^O^A)+1859775393:S<60?(p&O|p&A|O&A)-1894007588:(p^O^A)-899497514);D=A,A=O,O=p<<30|p>>>2,p=_,_=z}_+=P,p+=H,O+=F,A+=R,D+=W}return[_,p,O,A,D]},u=function(s,c){var d=e.wordsToBytes(n(s));return c&&c.asBytes?d:c&&c.asString?r.bytesToString(d):e.bytesToHex(d)};u._blocksize=16,u._digestsize=20,da.exports=u})();/*!
 * Core functionality for Snowplow Browser trackers v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function va(){try{return!!window.localStorage}catch{return!0}}function ya(){var e="modernizr";if(!va())return!1;try{var t=window.localStorage;return t.setItem(e,e),t.removeItem(e),!0}catch{return!1}}function pa(){var e,t;if("innerWidth"in window)e=window.innerWidth,t=window.innerHeight;else{var r=document.documentElement||document.body;e=r.clientWidth,t=r.clientHeight}return e>=0&&t>=0?e+"x"+t:null}function ga(){var e=document.documentElement,t=document.body,r=t?Math.max(t.offsetHeight,t.scrollHeight):0,n=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),u=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight,r);return isNaN(n)||isNaN(u)?"":n+"x"+u}function zn(e){return!!(e&&typeof e.valueOf()=="string")}function Kn(e){return Number.isInteger&&Number.isInteger(e)||typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Jn(e){if(!zn(e)){e=e.text||"";var t=document.getElementsByTagName("title");t&&t[0]!=null&&(e=t[0].text)}return e}function _r(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),r=t.exec(e);return r?r[1]:e}function Xn(e){var t=e.length;return e.charAt(--t)==="."&&(e=e.slice(0,t)),e.slice(0,2)==="*."&&(e=e.slice(1)),e}function wr(e){var t=window,r=ft("referrer",t.location.href)||ft("referer",t.location.href);if(r)return r;if(e)return e;try{if(t.top)return t.top.document.referrer;if(t.parent)return t.parent.document.referrer}catch{}return document.referrer}function Oe(e,t,r,n){if(e.addEventListener)return e.addEventListener(t,r,n),!0;if(e.attachEvent)return e.attachEvent("on"+t,r);e["on"+t]=r}function ft(e,t){var r=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null}function ma(e,t,r){var n=t+"="+r,u=e.split("#"),s=u[0].split("?"),c=s.shift(),d=s.join("?");if(!d)d=n;else{for(var v=!0,_=d.split("&"),p=0;p<_.length;p++)if(_[p].substr(0,t.length+1)===t+"="){v=!1,_[p]=n,d=_.join("&");break}v&&(d=n+"&"+d)}return u[0]=c+"?"+d,u.join("#")}function _a(e){try{var t=window.localStorage,r=t.getItem(e+".expires");if(r===null||+r>Date.now())return t.getItem(e);t.removeItem(e),t.removeItem(e+".expires");return}catch{return}}function Et(e,t,r){r===void 0&&(r=63072e3);try{var n=window.localStorage,u=Date.now()+r*1e3;return n.setItem("".concat(e,".expires"),u.toString()),n.setItem(e,t),!0}catch{return!1}}function Zn(e){try{var t=window.localStorage;return t.removeItem(e),t.removeItem(e+".expires"),!0}catch{return!1}}function wa(e,t){for(var r=window.location.hostname,n="_sp_root_domain_test_",u=n+new Date().getTime(),s="_test_value_"+new Date().getTime(),c=r.split("."),d=c.length-1;d>=0;){var v=c.slice(d,c.length).join(".");if(ke(u,s,0,"/",v,e,t),ke(u)===s){jt(u,v,e,t);for(var _=ba(n),p=0;p<_.length;p++)jt(_[p],v,e,t);return v}d-=1}return r}function jt(e,t,r,n){ke(e,"",-1,"/",t,r,n)}function ba(e){for(var t=document.cookie.split("; "),r=[],n=0;n<t.length;n++)t[n].substring(0,e.length)===e&&r.push(t[n]);return r}function ke(e,t,r,n,u,s,c){return arguments.length>1?document.cookie=e+"="+encodeURIComponent(t??"")+(r?"; Expires="+new Date(+new Date+r*1e3).toUTCString():"")+(n?"; Path="+n:"")+(u?"; Domain="+u:"")+(s?"; SameSite="+s:"")+(c?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}function Sa(e,t,r,n,u,s,c,d,v,_,p,O,A,D,I,P){var H=!1,F,R=[];n=typeof n=="string"?n.toLowerCase():n;var W=n===!0||n==="beacon"||n==="true",S=!!(W&&window.navigator&&window.navigator.sendBeacon&&!J(window.navigator.userAgent)),M=S&&W,z=n==="get",G=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),w=!z&&G&&(n==="post"||W),V=w?u:"/i",i="snowplowOutQueue_".concat(e,"_").concat(w?"post2":"get");if(W&&(A={}),s=r&&ya()&&w&&s||1,r)try{var o=window.localStorage.getItem(i);R=o?JSON.parse(o):[]}catch{}Array.isArray(R)||(R=[]),t.outQueues.push(R),G&&s>1&&t.bufferFlushers.push(function(j){H||k(j)});function a(j){var N="?",U={co:!0,cx:!0},B=!0;for(var K in j)j.hasOwnProperty(K)&&!U.hasOwnProperty(K)&&(B?B=!1:N+="&",N+=encodeURIComponent(K)+"="+encodeURIComponent(j[K]));for(var $ in U)j.hasOwnProperty($)&&U.hasOwnProperty($)&&(N+="&"+$+"="+encodeURIComponent(j[$]));return N}function l(j){var N=Object.keys(j).map(function(U){return[U,j[U]]}).reduce(function(U,B){var K=B[0],$=B[1];return U[K]=$.toString(),U},{});return{evt:N,bytes:h(JSON.stringify(N))}}function h(j){for(var N=0,U=0;U<j.length;U++){var B=j.charCodeAt(U);B<=127?N+=1:B<=2047?N+=2:B>=55296&&B<=57343?(N+=4,U++):B<65535?N+=3:N+=4}return N}var f=function(j){return typeof j[0]=="object"};function g(j,N){var U=C(N,!0,!1);U.send(L(T([j.evt])))}function b(j,N){F=N+V;var U=function(Te,te){return ue.warn("Event ("+Te+"B) too big, max is "+te)};if(w){var B=l(j);if(B.bytes>=c){U(B.bytes,c),g(B,F);return}else R.push(B)}else{var K=a(j);if(d>0){var $=q(K),fe=h($);if(fe>=d){if(U(fe,d),G){var B=l(j),ie=N+u;g(B,ie)}return}}R.push(K)}var X=!1;r&&(X=Et(i,JSON.stringify(R.slice(0,_)))),!H&&(!X||R.length>=s)&&k()}function k(j){for(j===void 0&&(j=!1);R.length&&typeof R[0]!="string"&&typeof R[0]!="object";)R.shift();if(R.length<1){H=!1;return}if(!zn(F))throw"No collector configured";if(H=!0,G){var N=function(re){for(var me=0,kt=0;me<re.length&&(kt+=re[me].bytes,!(kt>=c));)me+=1;return me},U=void 0,B,K;f(R)?(U=F,B=C(U,!0,j),K=N(R)):(U=q(R[0]),B=C(U,!1,j),K=1);var $=setTimeout(function(){B.abort(),H=!1},p),fe=function(re){for(var me=0;me<re;me++)R.shift();r&&Et(i,JSON.stringify(R.slice(0,_)))},ie=function(re){fe(re),k()};if(B.onreadystatechange=function(){B.readyState===4&&B.status>=200&&(clearTimeout($),B.status<300?ie(K):(m(B.status)||(ue.error("Status ".concat(B.status,", will not retry.")),fe(K)),H=!1))},!f(R))B.send();else{var X=R.slice(0,K);if(X.length>0){var Te=!1,te=X.map(function(re){return re.evt});if(M){var Me=new Blob([L(T(te))],{type:"application/json"});try{Te=navigator.sendBeacon(U,Me)}catch{Te=!1}}Te===!0?ie(K):B.send(L(T(te)))}}}else if(!O&&!f(R)){var Ae=new Image(1,1),Ie=!0;Ae.onload=function(){Ie&&(Ie=!1,R.shift(),r&&Et(i,JSON.stringify(R.slice(0,_))),k())},Ae.onerror=function(){Ie&&(Ie=!1,H=!1)},Ae.src=q(R[0]),setTimeout(function(){Ie&&H&&(Ie=!1,k())},p)}else H=!1}function m(j){return j>=200&&j<300?!1:I.includes(j)?!0:!P.includes(j)}function C(j,N,U){var B=new XMLHttpRequest;N?(B.open("POST",j,!U),B.setRequestHeader("Content-Type","application/json; charset=UTF-8")):B.open("GET",j,!U),B.withCredentials=D,O&&B.setRequestHeader("SP-Anonymous","*");for(var K in A)Object.prototype.hasOwnProperty.call(A,K)&&B.setRequestHeader(K,A[K]);return B}function L(j){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:j})}function T(j){for(var N=new Date().getTime().toString(),U=0;U<j.length;U++)j[U].stm=N;return j}function q(j){return v?F+j.replace("?","?stm="+new Date().getTime()+"&"):F+j}return{enqueueRequest:b,executeQueue:function(){H||k()},setUseLocalStorage:function(j){r=j},setAnonymousTracking:function(j){O=j},setCollectorUrl:function(j){F=j+V},setBufferSize:function(j){s=j}};function J(j){return N(13,j)||U(10,15,j)&&B(j);function N($,fe){var ie=fe.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/");return ie&&ie.length?parseInt(ie[0])<=$:!1}function U($,fe,ie){var X=ie.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/");return X&&X.length?parseInt(X[0])<=$||parseInt(X[0])===$&&parseInt(X[1])<=fe:!1}function B($){return $.match("Version/.* Safari/")&&!K($)}function K($){return $.match("Chrom(e|ium)")}}}function Oa(e,t){var r=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)"),n=r.exec(e);return n&&(n==null?void 0:n.length)>1?ft(t,n[1]):null}function Yn(e,t,r){var n;return e==="translate.googleusercontent.com"?(r===""&&(r=t),t=(n=Oa(t,"u"))!==null&&n!==void 0?n:"",e=_r(t)):(e==="cc.bingj.com"||e==="webcache.googleusercontent.com")&&(t=document.links[0].href,e=_r(t)),[e,t,r]}var Qn=0,De=1,Pa=2,st=3,br=4,ei=5,Pe=6,Ne=7,Be=8,Ue=9,xe=10;function xa(){var e=["1","",0,0,0,void 0,"","","",void 0,0];return e}function Ta(e,t,r,n){var u=new Date,s=Math.round(u.getTime()/1e3),c;e?(c=e.split("."),c.unshift("0")):c=["1",t,s,n,s,"",r],(!c[Pe]||c[Pe]==="undefined")&&(c[Pe]=be.v4()),(!c[Ne]||c[Ne]==="undefined")&&(c[Ne]=""),(!c[Be]||c[Be]==="undefined")&&(c[Be]=""),(!c[Ue]||c[Ue]==="undefined")&&(c[Ue]=""),(!c[xe]||c[xe]==="undefined")&&(c[xe]=0);var d=function(p,O){var A=parseInt(p);return isNaN(A)?O:A},v=function(p){return p?d(p,void 0):void 0},_=[c[Qn],c[De],d(c[Pa],s),d(c[st],n),d(c[br],s),v(c[ei]),c[Pe],c[Ne],c[Be],v(c[Ue]),d(c[xe],0)];return _}function Aa(e,t){var r;return e[De]?r=e[De]:t?(r="",e[De]=r):(r=be.v4(),e[De]=r),r}function ct(e,t){t===void 0&&(t=1),xr(e)?(e[Ne]=e[Pe],e[ei]=e[br],e[st]++):e[st]=t;var r=be.v4();return e[Pe]=r,e[xe]=0,e[Be]="",e[Ue]=void 0,r}function Sr(e){e[br]=Math.round(new Date().getTime()/1e3)}function Ia(e,t){if(e[xe]===0){var r=t.build();e[Be]=r.eid;var n=r.dtm||r.ttm;e[Ue]=n?parseInt(n):void 0}}function Ea(e){e[xe]+=1}function ja(e){return e.shift(),e.join(".")}function Ca(e,t){var r=e[Ue],n={userId:e[De],sessionId:e[Pe],eventIndex:e[xe],sessionIndex:e[st],previousSessionId:e[Ne]||null,storageMechanism:t=="localStorage"?"LOCAL_STORAGE":"COOKIE_1",firstEventId:e[Be]||null,firstEventTimestamp:r?new Date(r).toISOString():null};return n}function Or(e){return e[Pe]}function Ra(e){return e[De]}function Pr(e){return e[st]}function xr(e){return e[Qn]==="0"}function ka(e,t,r,n,u,s){s===void 0&&(s={});var c=[],d=function(p,O,A,D,I,P){var H,F,R,W,S,M,z,G,w,V,i,o,a,l,h,f,g,b,k,m,C,L,T,q,J,j;P.eventMethod=(H=P.eventMethod)!==null&&H!==void 0?H:"post";var N=function(y){var x;return(x=y.stateStorageStrategy)!==null&&x!==void 0?x:"cookieAndLocalStorage"},U=function(y){var x,E;return typeof y.anonymousTracking=="boolean"?!1:(E=((x=y.anonymousTracking)===null||x===void 0?void 0:x.withSessionTracking)===!0)!==null&&E!==void 0?E:!1},B=function(y){var x,E;return typeof y.anonymousTracking=="boolean"?!1:(E=((x=y.anonymousTracking)===null||x===void 0?void 0:x.withServerAnonymisation)===!0)!==null&&E!==void 0?E:!1},K=function(y){return!!y.anonymousTracking};c.push(Zu()),(!((R=(F=P==null?void 0:P.contexts)===null||F===void 0?void 0:F.webPage)!==null&&R!==void 0)||R)&&c.push(Xu()),c.push.apply(c,(W=P.plugins)!==null&&W!==void 0?W:[]);var $=ia({base64:P.encodeBase64,corePlugins:c,callback:zu}),fe=navigator.userLanguage||navigator.language,ie=document.characterSet||document.charset,X=Yn(window.location.hostname,window.location.href,wr()),Te=Xn(X[0]),te=X[1],Me=X[2],Ae,Ie=(S=P.platform)!==null&&S!==void 0?S:"web",re=Bi(D),me=(M=P.postPath)!==null&&M!==void 0?M:"/com.snowplowanalytics.snowplow/tp2",kt=(z=P.appId)!==null&&z!==void 0?z:"",Dt,Fe=document.title,yt,Fu=(G=P.resetActivityTrackingOnPageView)!==null&&G!==void 0?G:!0,pi,gi,Gu=(w=P.cookieName)!==null&&w!==void 0?w:"_sp_",pt=(V=P.cookieDomain)!==null&&V!==void 0?V:void 0,Br="/",Bt=(i=P.cookieSameSite)!==null&&i!==void 0?i:"None",Ut=(o=P.cookieSecure)!==null&&o!==void 0?o:!0,mi=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,_i=typeof P.respectDoNotTrack<"u"?P.respectDoNotTrack&&(mi==="yes"||mi==="1"):!1,Ur,wi=(a=P.cookieLifetime)!==null&&a!==void 0?a:63072e3,bi=(l=P.sessionCookieTimeout)!==null&&l!==void 0?l:1800,Ge=U(P),Mr=B(P),Ve=K(P),Z=N(P),Mt,Lr=new Date().getTime(),Lt,qt,$t,Ht,Si,Nt,se,ce=1,Le,Ee=Sa(p,I,Z=="localStorage"||Z=="cookieAndLocalStorage",P.eventMethod,me,(h=P.bufferSize)!==null&&h!==void 0?h:1,(f=P.maxPostBytes)!==null&&f!==void 0?f:4e4,(g=P.maxGetBytes)!==null&&g!==void 0?g:0,(b=P.useStm)!==null&&b!==void 0?b:!0,(k=P.maxLocalStorageQueueSize)!==null&&k!==void 0?k:1e3,(m=P.connectionTimeout)!==null&&m!==void 0?m:5e3,Mr,(C=P.customHeaders)!==null&&C!==void 0?C:{},(L=P.withCredentials)!==null&&L!==void 0?L:!0,(T=P.retryStatusCodes)!==null&&T!==void 0?T:[],((q=P.dontRetryStatusCodes)!==null&&q!==void 0?q:[]).concat([400,401,403,410,422])),Oi=!1,Pi=!1,oe={enabled:!1,installed:!1,configurations:{}},Vu=(j=(J=P.contexts)===null||J===void 0?void 0:J.session)!==null&&j!==void 0?j:!1,Ft;P.hasOwnProperty("discoverRootDomain")&&P.discoverRootDomain&&(pt=wa(Bt,Ut)),$.setTrackerVersion(A),$.setTrackerNamespace(O),$.setAppId(kt),$.setPlatform(Ie),$.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0"),$.addPayloadPair("cs",ie),$.addPayloadPair("lang",fe),$.addPayloadPair("res",screen.width+"x"+screen.height),$.addPayloadPair("cd",screen.colorDepth),Ii(),Di(),P.crossDomainLinker&&Ti(P.crossDomainLinker);function qe(){X=Yn(window.location.hostname,window.location.href,wr()),X[1]!==te&&(Me=wr(te)),Te=Xn(X[0]),te=X[1]}function xi(y){var x=new Date().getTime(),E=y.currentTarget;E!=null&&E.href&&(E.href=ma(E.href,"_sp",Nt+"."+x))}function Ti(y){for(var x=0;x<document.links.length;x++){var E=document.links[x];!E.spDecorationEnabled&&y(E)&&(Oe(E,"click",xi,!0),Oe(E,"mousedown",xi,!0),E.spDecorationEnabled=!0)}}function $e(y){var x;return pi&&(x=new RegExp("#.*"),y=y.replace(x,"")),gi&&(x=new RegExp("[{}]","g"),y=y.replace(x,"")),y}function Ai(y){var x=new RegExp("^([a-z]+):"),E=x.exec(y);return E?E[1]:null}function Wu(y,x){var E=Ai(x),Q;return E?x:x.slice(0,1)==="/"?Ai(y)+"://"+_r(y)+x:(y=$e(y),(Q=y.indexOf("?"))>=0&&(y=y.slice(0,Q)),(Q=y.lastIndexOf("/"))!==y.length-1&&(y=y.slice(0,Q+1)),y+x)}function zu(y){_i||Ft||Ee.enqueueRequest(y.build(),re)}function We(y){return Gu+y+"."+Si}function qr(y){var x=We(y);if(Z=="localStorage")return _a(x);if(Z=="cookie"||Z=="cookieAndLocalStorage")return ke(x)}function Ii(){qe(),Si=pr((pt||Te)+(Br||"/")).slice(0,4)}function gt(){var y=new Date;Mt=y.getTime()}function Ku(){Ju(),gt()}function Ei(){var y=document.documentElement;return y?[y.scrollLeft||window.pageXOffset,y.scrollTop||window.pageYOffset]:[0,0]}function ji(){var y=Ei(),x=y[0];Lt=x,qt=x;var E=y[1];$t=E,Ht=E}function Ju(){var y=Ei(),x=y[0];x<Lt?Lt=x:x>qt&&(qt=x);var E=y[1];E<$t?$t=E:E>Ht&&(Ht=E)}function Gt(y){return Math.round(y)}function Vt(){var y=We("ses"),x="*";Ci(y,x,bi)}function $r(y){var x=We("id"),E=ja(y);Ci(x,E,wi)}function Ci(y,x,E){Ve&&!Ge||(Z=="localStorage"?Et(y,x,E):(Z=="cookie"||Z=="cookieAndLocalStorage")&&ke(y,x,E,Br,pt,Bt,Ut))}function Ri(y){var x=We("id"),E=We("ses");Zn(x),Zn(E),jt(x,pt,Bt,Ut),jt(E,pt,Bt,Ut),y!=null&&y.preserveSession||(se=be.v4(),ce=1),y!=null&&y.preserveUser||(Nt=be.v4(),Le=null)}function ki(y){y&&y.stateStorageStrategy&&(P.stateStorageStrategy=y.stateStorageStrategy,Z=N(P)),Ve=K(P),Ge=U(P),Mr=B(P),Ee.setUseLocalStorage(Z=="localStorage"||Z=="cookieAndLocalStorage"),Ee.setAnonymousTracking(Mr)}function Di(){if(!(Ve&&!Ge)){var y=Z!="none"&&!!qr("ses"),x=mt();Nt=Aa(x,Ve),y?se=Or(x):se=ct(x),ce=Pr(x),Z!="none"&&(Vt(),Sr(x),$r(x))}}function mt(){if(Z=="none")return xa();var y=qr("id")||void 0;return Ta(y,Nt,se,ce)}function Bi(y){return y.indexOf("http")===0?y:(document.location.protocol==="https:"?"https":"http")+"://"+y}function Ui(){(!Oi||I.pageViewId==null)&&(I.pageViewId=be.v4())}function Hr(){return I.pageViewId==null&&(I.pageViewId=be.v4()),I.pageViewId}function Xu(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:Hr()}}]}}}function Zu(){var y=function(E){return Ve?null:E},x=function(E){return Ge?E:y(E)};return{beforeTrack:function(E){var Q=qr("ses"),Y=mt();if(Ur?Ft=!!ke(Ur):Ft=!1,_i||Ft){Ri();return}xr(Y)?(!Q&&Z!="none"?se=ct(Y):se=Or(Y),ce=Pr(Y)):new Date().getTime()-Lr>bi*1e3&&(ce++,se=ct(Y,ce)),Sr(Y),Ia(Y,E),Ea(Y),E.add("vp",pa()),E.add("ds",ga()),E.add("vid",x(ce)),E.add("sid",x(se)),E.add("duid",y(Ra(Y))),E.add("uid",y(Le)),qe(),E.add("refr",$e(Ae||Me)),E.add("url",$e(Dt||te)),Vu&&!Ge&&!Ve&&Yu(E,Ca(Y,Z)),Z!="none"&&($r(Y),Vt()),Lr=new Date().getTime()}}}function Yu(y,x){var E={schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:x};y.addContextEntity(E)}function Qu(){var y=mt();xr(y)?(Z!="none"?se=ct(y):se=Or(y),ce=Pr(y),Vt()):(ce++,se=ct(y,ce)),Sr(y),Z!="none"&&($r(y),Vt()),Lr=new Date().getTime()}function Nr(y,x){return(y||[]).concat(x?x():[])}function ef(y){var x=y.title,E=y.context,Q=y.timestamp,Y=y.contextCallback;qe(),Pi&&Ui(),Pi=!0,Fe=document.title,yt=x;var ze=Jn(yt||Fe);$.track(oa({pageUrl:$e(Dt||te),pageTitle:ze,referrer:$e(Ae||Me)}),Nr(E,Y),Q);var he=new Date,Wt=!1;if(oe.enabled&&!oe.installed){oe.installed=!0,Wt=!0;var Fr={update:function(){if(typeof window<"u"&&typeof window.addEventListener=="function"){var Ke=!1,zt=Object.defineProperty({},"passive",{get:function(){Ke=!0},set:function(){}}),$i=function(){};window.addEventListener("testPassiveEventSupport",$i,zt),window.removeEventListener("testPassiveEventSupport",$i,zt),Fr.hasSupport=Ke}}};Fr.update();var Li="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(Fr,"hasSupport")?Oe(document,Li,gt,{passive:!0}):Oe(document,Li,gt),ji();var of=["click","mouseup","mousedown","mousemove","keypress","keydown","keyup"],af=["resize","focus","blur"],Gr=function(uf,Ke){return Ke===void 0&&(Ke=gt),function(zt){return Oe(document,zt,Ke)}};of.forEach(Gr(document)),af.forEach(Gr(window)),Gr(window,Ku)("scroll")}if(oe.enabled&&(Fu||Wt)){Mt=he.getTime();var qi=void 0;for(qi in oe.configurations){var Vr=oe.configurations[qi];Vr&&(window.clearInterval(Vr.activityInterval),tf(Vr,E,Y))}}}function tf(y,x,E){var Q=function(he,Wt){qe(),he({context:Wt,pageViewId:Hr(),minXOffset:Lt,minYOffset:$t,maxXOffset:qt,maxYOffset:Ht}),ji()},Y=function(){var he=new Date;Mt+y.configMinimumVisitLength>he.getTime()&&Q(y.callback,Nr(x,E)),y.activityInterval=window.setInterval(ze,y.configHeartBeatTimer)},ze=function(){var he=new Date;Mt+y.configHeartBeatTimer>he.getTime()&&Q(y.callback,Nr(x,E))};y.configMinimumVisitLength!=0?y.activityInterval=window.setTimeout(Y,y.configMinimumVisitLength):y.activityInterval=window.setInterval(ze,y.configHeartBeatTimer)}function Mi(y){var x=y.minimumVisitLength,E=y.heartbeatDelay,Q=y.callback;if(Kn(x)&&Kn(E))return{configMinimumVisitLength:x*1e3,configHeartBeatTimer:E*1e3,callback:Q};ue.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function rf(y){var x=y.context,E=y.minXOffset,Q=y.minYOffset,Y=y.maxXOffset,ze=y.maxYOffset,he=document.title;he!==Fe&&(Fe=he,yt=void 0),$.track(aa({pageUrl:$e(Dt||te),pageTitle:Jn(yt||Fe),referrer:$e(Ae||Me),minXOffset:Gt(E),maxXOffset:Gt(Y),minYOffset:Gt(Q),maxYOffset:Gt(ze)}),x)}var nf={getDomainSessionIndex:function(){return ce},getPageViewId:function(){return Hr()},newSession:Qu,getCookieName:function(y){return We(y)},getUserId:function(){return Le},getDomainUserId:function(){return mt()[1]},getDomainUserInfo:function(){return mt()},setReferrerUrl:function(y){Ae=y},setCustomUrl:function(y){qe(),Dt=Wu(te,y)},setDocumentTitle:function(y){Fe=document.title,yt=y},discardHashTag:function(y){pi=y},discardBrace:function(y){gi=y},setCookiePath:function(y){Br=y,Ii()},setVisitorCookieTimeout:function(y){wi=y},crossDomainLinker:function(y){Ti(y)},enableActivityTracking:function(y){oe.configurations.pagePing||(oe.enabled=!0,oe.configurations.pagePing=Mi(le(le({},y),{callback:rf})))},enableActivityTrackingCallback:function(y){oe.configurations.callback||(oe.enabled=!0,oe.configurations.callback=Mi(y))},updatePageActivity:function(){gt()},setOptOutCookie:function(y){Ur=y},setUserId:function(y){Le=y},setUserIdFromLocation:function(y){qe(),Le=ft(y,te)},setUserIdFromReferrer:function(y){qe(),Le=ft(y,Me)},setUserIdFromCookie:function(y){Le=ke(y)},setCollectorUrl:function(y){re=Bi(y),Ee.setCollectorUrl(re)},setBufferSize:function(y){Ee.setBufferSize(y)},flushBuffer:function(y){y===void 0&&(y={}),Ee.executeQueue(),y.newBufferSize&&Ee.setBufferSize(y.newBufferSize)},trackPageView:function(y){y===void 0&&(y={}),ef(y)},preservePageViewId:function(){Oi=!0},disableAnonymousTracking:function(y){P.anonymousTracking=!1,ki(y),Di(),Ee.executeQueue()},enableAnonymousTracking:function(y){var x;P.anonymousTracking=(x=y&&(y==null?void 0:y.options))!==null&&x!==void 0?x:!0,ki(y),Ge||Ui()},clearUserData:Ri};return le(le({},nf),{id:p,namespace:O,core:$,sharedState:I})},v=d(e,t,r,n,u,s),_=le(le({},v),{addPlugin:function(p){var O,A;_.core.addPlugin(p),(A=(O=p.plugin).activateBrowserPlugin)===null||A===void 0||A.call(O,_)}});return c.forEach(function(p){var O;(O=p.activateBrowserPlugin)===null||O===void 0||O.call(p,_)}),_}var lt={};function Tr(e,t){try{Ba(e??Ua()).forEach(t)}catch(r){ue.error("Function failed",r)}}function Ar(e,t,r){try{ti(e??Object.keys(t),t).forEach(r)}catch(n){ue.error("Function failed",n)}}function Da(e,t,r,n,u,s){return lt.hasOwnProperty(e)?null:(lt[e]=ka(e,t,r,n,u,s),lt[e])}function Ba(e){return ti(e,lt)}function Ua(){return Object.keys(lt)}function ti(e,t){for(var r=[],n=0,u=e;n<u.length;n++){var s=u[n];t.hasOwnProperty(s)?r.push(t[s]):ue.warn(s+" not configured")}return r}var Ma=function(){function e(){this.outQueues=[],this.bufferFlushers=[],this.hasLoaded=!1,this.registeredOnLoadHandlers=[]}return e}();function La(){var e=new Ma,t=document,r=window;function n(){t.visibilityState=="hidden"&&e.bufferFlushers.forEach(function(d){d(!1)})}function u(){e.bufferFlushers.forEach(function(d){d(!1)})}function s(){var d;if(!e.hasLoaded)for(e.hasLoaded=!0,d=0;d<e.registeredOnLoadHandlers.length;d++)e.registeredOnLoadHandlers[d]();return!0}function c(){t.addEventListener?t.addEventListener("DOMContentLoaded",function d(){t.removeEventListener("DOMContentLoaded",d,!1),s()}):t.attachEvent&&t.attachEvent("onreadystatechange",function d(){t.readyState==="complete"&&(t.detachEvent("onreadystatechange",d),s())}),Oe(r,"load",s,!1)}return t.visibilityState&&Oe(t,"visibilitychange",n,!1),Oe(r,"beforeunload",u,!1),document.readyState==="loading"?c():s(),e}/*!
 * Ecommerce tracking for Snowplow v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function ri(){return{items:[]}}var pe={},ge={};function qa(){return{activateBrowserPlugin:function(e){pe[e.id]=e,ge[e.id]=ri()}}}function $a(e,t){t===void 0&&(t=Object.keys(pe)),t.forEach(function(r){ge[r]&&(ge[r].transaction=e)})}function Ha(e,t){t===void 0&&(t=Object.keys(pe)),t.forEach(function(r){ge[r]&&ge[r].items.push(e)})}function Na(e){e===void 0&&(e=Object.keys(pe)),Ar(e,pe,function(t){var r=ge[t.id].transaction;r&&t.core.track(ua(r),r.context,r.timestamp);for(var n=0;n<ge[t.id].items.length;n++){var u=ge[t.id].items[n];t.core.track(fa(u),u.context,u.timestamp)}ge[t.id]=ri()})}function Fa(e,t){t===void 0&&(t=Object.keys(pe)),Ar(t,pe,function(r){r.core.track(sa(e),e.context,e.timestamp)})}function Ga(e,t){t===void 0&&(t=Object.keys(pe)),Ar(t,pe,function(r){r.core.track(ca(e),e.context,e.timestamp)})}/*!
 * Browser tracker for Snowplow v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function Va(e,t){Tr(t,function(r){r.enableActivityTracking(e)})}function Wa(e,t){Tr(t,function(r){r.trackPageView(e)})}function Ir(e,t){Tr(t,function(r){r.core.track(yr({event:e.event}),e.context,e.timestamp)})}var ni=typeof window<"u"?La():void 0;function za(e,t,r){if(r===void 0&&(r={}),ni)return Da(e,e,"js-".concat(la),t,ni,r)}var Ka=1/0,Ja=9007199254740991,Xa="[object Arguments]",Za="[object Function]",Ya="[object GeneratorFunction]",Qa="[object Symbol]",eu=typeof ne=="object"&&ne&&ne.Object===Object&&ne,tu=typeof self=="object"&&self&&self.Object===Object&&self,ru=eu||tu||Function("return this")();function nu(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function iu(e,t){for(var r=-1,n=e?e.length:0,u=Array(n);++r<n;)u[r]=t(e[r],r,e);return u}function ou(e,t){for(var r=-1,n=t.length,u=e.length;++r<n;)e[u+r]=t[r];return e}var Er=Object.prototype,au=Er.hasOwnProperty,jr=Er.toString,ii=ru.Symbol,uu=Er.propertyIsEnumerable,oi=ii?ii.isConcatSpreadable:void 0,ai=Math.max;function ui(e,t,r,n,u){var s=-1,c=e.length;for(r||(r=lu),u||(u=[]);++s<c;){var d=e[s];t>0&&r(d)?t>1?ui(d,t-1,r,n,u):ou(u,d):n||(u[u.length]=d)}return u}function fu(e,t){return e=Object(e),su(e,t,function(r,n){return n in e})}function su(e,t,r){for(var n=-1,u=t.length,s={};++n<u;){var c=t[n],d=e[c];r(d,c)&&(s[c]=d)}return s}function cu(e,t){return t=ai(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,u=ai(r.length-t,0),s=Array(u);++n<u;)s[n]=r[t+n];n=-1;for(var c=Array(t+1);++n<t;)c[n]=r[n];return c[t]=s,nu(e,this,c)}}function lu(e){return vu(e)||hu(e)||!!(oi&&e&&e[oi])}function du(e){if(typeof e=="string"||wu(e))return e;var t=e+"";return t=="0"&&1/e==-Ka?"-0":t}function hu(e){return pu(e)&&au.call(e,"callee")&&(!uu.call(e,"callee")||jr.call(e)==Xa)}var vu=Array.isArray;function yu(e){return e!=null&&mu(e.length)&&!gu(e)}function pu(e){return fi(e)&&yu(e)}function gu(e){var t=_u(e)?jr.call(e):"";return t==Za||t==Ya}function mu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ja}function _u(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fi(e){return!!e&&typeof e=="object"}function wu(e){return typeof e=="symbol"||fi(e)&&jr.call(e)==Qa}var bu=cu(function(e,t){return e==null?{}:fu(e,iu(ui(t,1),du))}),dt=bu,Ct={},Su={get exports(){return Ct},set exports(e){Ct=e}};const si=e=>typeof e=="object"&&e!==null,ci=Symbol("skip"),li=e=>si(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),Cr=(e,t,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(e))return n.get(e);n.set(e,r.target);const{target:u}=r;delete r.target;const s=c=>c.map(d=>li(d)?Cr(d,t,r,n):d);if(Array.isArray(e))return s(e);for(const[c,d]of Object.entries(e)){const v=t(c,d,e);if(v===ci)continue;let[_,p,{shouldRecurse:O=!0}={}]=v;_!=="__proto__"&&(r.deep&&O&&li(p)&&(p=Array.isArray(p)?s(p):Cr(p,t,r,n)),u[_]=p)}return u};Su.exports=(e,t,r)=>{if(!si(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return Cr(e,t,r)},Ct.mapObjectSkip=ci;var Rr=function(){return Rr=Object.assign||function(t){for(var r,n=1,u=arguments.length;n<u;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Rr.apply(this,arguments)},kr=function(){return kr=Object.assign||function(t){for(var r,n=1,u=arguments.length;n<u;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},kr.apply(this,arguments)};function Ou(e){return e.toLowerCase()}var Pu=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],xu=/[^A-Z0-9]+/gi;function Tu(e,t){t===void 0&&(t={});for(var r=t.splitRegexp,n=r===void 0?Pu:r,u=t.stripRegexp,s=u===void 0?xu:u,c=t.transform,d=c===void 0?Ou:c,v=t.delimiter,_=v===void 0?" ":v,p=di(di(e,n,"$1\0$2"),s,"\0"),O=0,A=p.length;p.charAt(O)==="\0";)O++;for(;p.charAt(A-1)==="\0";)A--;return p.slice(O,A).split("\0").map(d).join(_)}function di(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(n,u){return n.replace(u,r)},e)}function Au(e,t){return t===void 0&&(t={}),Tu(e,kr({delimiter:"."},t))}function Iu(e,t){return t===void 0&&(t={}),Au(e,Rr({delimiter:"_"},t))}const Eu=Xt(Object.freeze(Object.defineProperty({__proto__:null,snakeCase:Iu},Symbol.toStringTag,{value:"Module"}))),ju=Ct,{snakeCase:Cu}=Eu;var ht=function(e,t){return t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t),ju(e,function(r,n){return[Ru(t.exclude,r)?r:Cu(r,t.parsingOptions),n]},t)};function Ru(e,t){return e.some(function(r){return typeof r=="string"?r===t:r.test(t)})}const ku=e=>({mobile:!!e.mobile,email:e.user.email,user_id:e.user.user_id,order_id:e.transaction.order_id,total:e.transaction.total,currency:e.transaction.currency,shipping:e.transaction.shipping_cost,items:e.transaction.line_items.map(t=>({quantity:t.quantity,subtotal:t.subtotal,sku:t.product.sku_code,id:t.product.id,size:t.product.size}))}),Rt=(e,t,r={})=>{const n=`${Math.ceil(Math.random()*1e3)}${new Date().getTime()}`;je(Wr(e,{...t,no_cache:n},r))},Du=(e,t,r={})=>{const n=ht(dt(t,["productCodes","skus"]));Rt("/widgets/basket_tracking",{payload:JSON.stringify(n)},e.config(r))},Bu=(e,t,r={})=>{const n=ku(t);Rt("/widgets/capture",{payload:JSON.stringify(n)},e.config(r))},Uu=(e,t,r={})=>{const n=ht(dt(t,["productCode","mobile","skuId","type","userId"]));Rt("/widgets/track",n,e.config(r))},Mu=e=>{const t={path:e.page.breadcrumb};return e.page.number&&(t.page=e.page.number),e.listing&&(e.listing.filters&&(t.filters=e.listing.filters.filter(r=>r.selected.length>0)),e.listing.items&&(t.items=e.listing.items.map(r=>r.id))),t},hi={basket:Du,plp:(e,t,r={})=>{var s,c,d,v;if(!t)throw new Error("trackPLP requires data about the page. Please see the documentation to ensure you are passing the correct parameters");const n=e.config(r);if(!((c=(s=n==null?void 0:n.tracking)==null?void 0:s.plp)!=null&&c.itemsOptional)&&(!((d=t==null?void 0:t.listing)!=null&&d.items)||((v=t==null?void 0:t.listing)==null?void 0:v.items.length)===0))throw new Error("trackPLP requires items on the page to be specified or `config.tracking.plp.itemsOptional` to be true");const u=Mu(t);Rt("/widgets/plp_capture",{payload:JSON.stringify(u)},n)},pdp:Uu,order:Bu,identify:(e,t,r={})=>{if(!t||!t.email&&!t.userId)throw new Error("trackIdentify requires either an `email` or `userId` to be provided.")},addToBasket:(e,t,r={})=>{if(!t||!t.productCode&&!t.sku)throw new Error("trackAddToBasket requires either a `productCode` or `sku`")}},de="dressipi",Lu=e=>{if(!e.host)return;if(!e.namespace_id)throw new Error("Please configure your Dressipi snippet with a valid namespace_id.");const t=za(de,e.host,{appId:e.namespace_id,postPath:"/t/t",cookieName:"_drsp_id",cookieDomain:e.host,plugins:[qa()]});return Va({minimumVisitLength:10,heartbeatDelay:10}),t},qu=(e,t={})=>{Wa({},[de])},vi=(e,t,r={})=>{if(!t.sku&&!t.productCode)throw new Error("A sku and/or productCode is required to track a view of an item on a PDP");Ir({event:{schema:"iglu:com.dressipi/item_view/jsonschema/1-0-0",data:{item:ht(t)}}},[de]),hi.pdp(e,{productCode:t.productCode||"",skuId:t.sku},r)},$u=(e,t,r={})=>{if(!t)throw new Error("trackPLP requires data about the page. Please see the documentation to ensure you are passing the correct parameters");Ir({event:{schema:"iglu:com.dressipi/listings_view/jsonschema/1-0-0",data:{page:{number:t.page.number},items:t.items.map(n=>ht(n)),filters:t.filters}}},[de])},yi=(e,t,r={})=>{if(!t||!t.customerId&&!t.email)throw new Error("trackIdentify requires either an `email` or `customerId` to be provided.");const n=Object.entries(t).reduce((u,s)=>{const[c,d]=s;if(d.indexOf("@")==-1)return u[c]=Promise.resolve({name:c,value:d}),u;const v=new zr.Sha256;return v.update(d+"_"+e.config().namespace_id),u[c]=v.digest().then(_=>({name:c,value:_.reduce((p,O)=>p+("0"+O.toString(16)).slice(-2),"")})),u},{});Promise.all(Object.values(n)).then(u=>{Ir({event:{schema:"iglu:com.dressipi/identify/jsonschema/1-0-0",data:{identifiers:u}}},[de])})},Hu={init:Lu,pageView:qu,pdp:vi,itemView:vi,addToBasket:(e,t,r={})=>{Fa(t,[de])},removeFromBasket:(e,t,r={})=>{Ga(t,[de])},plp:$u,order:(e,t,r={},n={})=>{if(!t)throw new Error("Tracking an Order requires data about the purchase. Please see the documentation to ensure you are passing the correct parameters");const u=t.orderId;$a(dt(t,["orderId","total","tax","shipping","currency"]),[de]);for(let s=0;s<t.lineItems.length;s++)Ha({orderId:u,...dt(t.lineItems[s],["sku","name","price","quantity","currency"])},[de]);Na([de]),(r.customerId||r.email)&&yi(e,r,n),hi.order(e,{mobile:!1,user:{user_id:r.customerId||"",email:r.email||""},transaction:{order_id:t.orderId,total:t.total,currency:t.currency,shipping_cost:t.shipping,line_items:t.lineItems.map(s=>({quantity:s.quantity,subtotal:s.price,product:{sku_code:s.sku,id:-1,size:""}}))}},n)},identify:yi},vt=(e,t,r,n)=>{const u={width:r.width||"100%",height:r.height||null},{deviceType:s,variation:c}=n;if(!n.host)throw new Error("Please pass a server host to connect to in the configuration.");const d=Re({deviceType:s,variation:c},dt(r,["channel","productCode","skuId","id","language","payload","deviceType","variation"])),v=ht(d);if(!r.channel)throw new Error("Please pass a server host to connect to in the configuration.");const _=Wr(t,v,n),p=ve(u.height,u.width,_);r.insertBefore?e.insertBefore(p,r.insertBefore):e.appendChild(p);const O={onLoad:r.onLoad||(()=>{}),onResize:r.onResize||(()=>{}),onClose:r.onClose||(()=>{}),onScroll:r.onScroll||(()=>{})};Gi(p,n.host,r.channel,O)},Nu={sizing:(e,t,r,n={})=>{r.channel=r.channel||"banner",vt(t,"/widgets/banner",r,e.config(n))},basket:(e,t,r={},n={})=>{const u=(r==null?void 0:r.items)||[];u.length!==0&&vt(t,"/widgets/shopping_basket",Re({channel:"shopping_basket",payload:JSON.stringify({items:u})},r),e.config(n))},plp:(e,t,r={},n={})=>{vt(t,"/widgets/plp_widgets",Re({channel:"plp",id:r.plpType},r),e.config(n))},similarItems:(e,t,r,n={})=>{r.channel=r.channel||"similar_items",vt(t,"/widgets/similar_items",r,e.config(n))},outfits:(e,t,r,n={})=>{r.channel=r.channel||"outfits",vt(t,"/widgets/outfits",r,e.config(n))}};try{const e=new Wi(Hu,Nu,zi,null,new wt);Xi(e),Ji(e)}catch(e){e instanceof Error?console.error(`[DRESSIPI] ${e.message}`,e):console.error("[DRESSIPI] Unknown error:",e)}})();
})()